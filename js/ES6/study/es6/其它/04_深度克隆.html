<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>对象的深度克隆</title>
</head>
<body>


<!--
  1、数据类型：
    * 数据分为基本的数据类型(String, Number, boolean, Null, Undefined)和对象数据类型
    - 基本数据类型：
      特点： 存储的是该对象的实际数据
    - 对象数据类型：
      特点： 存储的是该对象在栈中引用，真实的数据存放在堆内存里
  2、复制数据
    - 基本数据类型存放的就是实际的数据，可直接复制
      let number2 = 2;
      let number1 = number2;
    - 克隆数据：对象/数组
      1、区别： 浅拷贝/深度拷贝
         判断： 拷贝是否产生了新的数据还是拷贝的是数据的引用
         知识点：对象数据存放的是对象在栈内存的引用，直接复制的是对象的引用
         let obj = {username: 'kobe'}
         let obj1 = obj; // obj1 复制了obj在栈内存的引用
      2、常用的拷贝技术
        1). arr.concat(): 数组浅拷贝
        2). arr.slice(): 数组浅拷贝
        3). JSON.parse(JSON.stringify(arr/obj)): 数组或对象深拷贝, 但不能处理函数数据
        4). 浅拷贝包含函数数据的对象/数组
        5). 深拷贝包含函数数据的对象/数组
-->
<script type="text/javascript">
    let str = "abcd";
    let str2 = str;
    console.log(str);
    str2 = "";
    console.log(str);

    let bool1 = true;
    let bool2 = bool1;
    bool2 = false;
    console.log(bool1);

    let obj = {name: "a", age: 1};
    let obj1 = obj;
    console.log(obj);
    obj1.name = "b";
    console.log(obj);

    let arr = [1, 4, {name: "a", age: 1}];
    let arr2 = arr;
    arr2[0] = "abcd";
    console.log(arr);
    console.log(arr2);
    /*
    * 拷贝数据
    *   基本数据类型
    *     拷贝后会生成一份新的数据，修改拷贝后的数据不会影响原数据
    *   对象/数组
    *     拷贝后不会生成新的数据，而是数据的引用（地址），修改拷贝后的数据会影响原来的数据
    * 拷贝数据的方法
    *   1.直接赋值给一个变量 //基本数据不会受影响，对象/数组会修改原来的数据 浅拷贝
    *   2.Object.assign   //浅拷贝
    *   3.Array.prototype.concat() //浅拷贝
    *   4.Array.prototype.slice()  //浅拷贝
    *   5.JSON.parse(JSON.stringify(obj));//深拷贝/深度克隆，不能处理函数
    *浅拷贝：
    *   特点：拷贝的是引用，修改拷贝以后的数据会影响原数据
    * 深拷贝：
    *   特点：拷贝的时候会生成新的数据，修改拷贝以后的数据不会影响原数据
    * */

    let obj2 = Object.assign(obj);
    console.log(obj.name);
    obj2.name = "wade";
    console.log(obj.name);

    arr2 = arr.concat();
    arr2[0] = "a";
    arr2[2].name = "bbbb";
    console.log(arr, arr2);
    let arr3 = arr.slice();
    arr3[2].name = "cccc";
    console.log(arr);

    let arr4 = JSON.parse(JSON.stringify(arr));
    console.log(arr4);
    arr4[2].name = "ddddd";
    console.log(arr4);
</script>
</body>
</html>